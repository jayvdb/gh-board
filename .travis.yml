language: node_js
cache:
  directories:
    - "node_modules"

jobs:
  include:
    - python: 3.6
      stage: moban
      env: false
      cache: pip
      before_install: false
      install: pip install moban
      before_script: false
      script: .ci/check_moban.sh
      after_success: false

# Needed for Firefox
before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sleep 3 # give xvfb some time to start

script:
  - npm run test
  - script/build.sh

notifications:
  email: false
  webhooks: https://www.travisbuddy.com/
  on_success: never
